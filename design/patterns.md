# Patterns

## New in Android

### Android 5.0 Lollipop

* Material design: Material design 各个设备和平台上视觉，动作，交互的综合设计准则。Android 5.0 为复杂的视图提供了新的主题，控件，
为阴影和动画提供了新的 API，帮助你在应用中实现  material design.
* Notifications: 在 Android 5.0 中，通知得到了重要更新，包含 material design 风格的视觉改变，锁屏状态下的通知，优先级通知以及云同步通知。

### Android 4.0 KitKat

* Your branding: 一致性在Android中有重要的地位，但是你仍然可以灵活地定制应用的样子，以便加强你的品牌。使用你品牌的颜色覆盖 Android
框架中默认的蓝色，例如在复选框，进度条，单选框，滑块，标签，滑动指示器。在动作栏上显示应用的启动图标及名称，让用户在应用的每个视图
中都能看到。强烈建议将品牌元素整合到应用的视觉语言中。
* Touch feedback: 在 Android KitKat 之前，Android 默认的触摸反馈是醒目的蓝色。每次触摸都会导致一个高对比度的颜色，他们可能和你
品牌的颜色不搭。在 Android KitKat 及之后，触摸反馈不易察觉，当一样东西被触摸时，默认情况下他的背景颜色略微变暗或者变亮。这带来了
两个好处: 小的反馈比突兀的反应更令人愉悦；可以更好的将你的品牌整合进来，因为无论你选择什么颜色触摸反馈都能很好地工作。
* Full screen: Android KitKat 提升了应用使用全屏的支持
* Gestures: 更新的 Gestures 页面包含了 Android KitKat 中引入的新手势指引，两点触摸及两点触摸拖拽。这些手势可以用来改变内容视图
的大小。

### Android 4.1 Jelly Bean

* Notifications: 通知在 Android 4.1 中得到了显著的增强：
  - 用户可以在 drawer 中快速对通知作出响应
  - 通知在大小和布局上更灵活
  - 一个优先级标记帮助我们将通知按重要程度排序
  - 通知可以被收缩和扩展
  
  基本的通知布局并没有改变，所以为 Jelly Beans 之前版本设计的通知是可以正常使用的。
  
* Resizable Application Widgets:  widgets 是主屏幕定制中非常重要的一个方面，可以快速浏览应用中最重要的数据和功能。Android 4.1
引入了增强的应用 widgets，可以自动调整大小 ，载入不同内容 ，它基于下面几个方面：
  - 用户把他们放在主屏幕的什么位置
  - 用户将他们放大到多大
  - 主屏幕上有多少可用空间
  
  你可以为 widgets 分别提供横屏和竖屏的布局，当屏幕方向改变时，系统会加载合适的布局
  
* Accessibility

Android 的任务之一就是组织世界上的信息，并且让他们随时随地可以访问并且有用。我们的任务适用于所有用户，包含那些有视觉障碍
或者听力丧失。新的 Accessibility 页面告诉你如何设计你的应用，使得他们可以访问到

  - 导航符合直觉
  - 使用推荐的触摸目标大小
  - 可见的UI元素要有有意义的名字
  - 超时时要提供备选方案
  - 使用标准框架控件或者对定制控件提供动作反馈
  - 自己试试

### Android 4.0 Ice Cream Sandwich

* Navigation bar: Android 4.0 移除了手机上传统的硬件按钮，替换成了三个虚拟按钮：返回，主屏幕，最近访问。阅读 Compatibility 模式，学习系统如何适配有硬件按钮的手机以及Android 3.0 以前依赖于菜单键的应用。
* Action bar: 动作栏是 Android 应用中最重要的结构化元素。它在所有平台上提供了一致的导航方式，允许你的应用将动作显示出来。
* Multi-pane layouts: 在 Android 中，创建可以适配不同设备和屏幕大小的应用非常重要。Multi-pane 布局使得你可以在手机上分别显示各个活动，在平板上组合到一起。
* Selection: 长按按钮以前是用来显示目标的与环境相关的动作，现在用于数据选择。当选择数据时，与环境相关的动作栏会显示可用的动作按钮。

## App Structure 

应用根据需求的不同，呈现出不同的姿态：

* 像计算器和照相机这样的应用，就一个活动，一个屏幕
* 像电话本这样的应用主要是在不同活动之间切换，没有较深的导航
* 像邮件和应用商店这样的应用会将数据视图和深导航结合在一起

应用的结构很大程度上依赖于你要向用户展示的内容以及任务

### General Structure

一个典型的 Android 应用由顶层视图和详情/编辑视图构成。如果层次过深，可以通过分类视图连接顶层视图和详情视图。

* Top level views: 顶层视图通常由应用支持的各种不同的视图构成。这些视图要么给出同样数据的不同显示方式，要么给出应用的不同功能。
* Category views: 分类视图可以让你进入下一层的数据
* Detail/edit view: 详情/编辑视图是你创建，使用数据的地方


### Top Level 

应用首屏的布局需要特别关注，这是用户启动应用后看到的第一个页面，所以需要考虑到新用户和老用户的体验。

问问你自己：“典型用户在我的应用中最想做的事情是什么？”，根据这个问题的答案设计首屏的结构。

* Put content forward: 许多应用主要用于内容展示，要避免那种只包含导航的页面，通过将内容放到首屏的中间让用户马上就能看到应用的内容。选择布局时，要注意视觉上要令人愉悦，同时适用于数据类型和屏幕大小。
* Set up action bars for navigation and actions: 应用内所有页面都应该显示动作栏，以便提供一致的导航并且可以看到重要的动作按钮。在最顶层，动作栏需要特别考虑以下内容 ：
  - 使用动作按钮显示应用图标和名称
  - 如果顶层包含多个视图，可以通过在动作栏增加控件保证用户很容易进入每个视图的导航
  - 如果你的应用可以让用户创建内容，考虑让用户从顶层就能访问到这些数据
  - 如果内容是可以搜索的，可以把搜索按钮放到动作栏上，这样用户可以跳过导航这一层，直接进入搜索

### Topo Level Switching With View Controls

顶层视图通过将用户引导进入主要的功能区域传达应用的功能。在许多情况下，顶层视图包含了多个视图，你需要确保用户可以在他们之间高效地导航。Android 为这一任务提供了几个视图控件支持:

* Fixed tabs: 固定标签同时在顶层视图显示，这样可以很容易浏览，切换。他们一直在屏幕上显示，不会像可滑动标签一样移出屏幕。固定标签应该总是可以通过在内容区左右滑动进行切换。在下列情况下你可以使用标签：
  - 用户经常在不同视图之间切换
  - 最多有三个顶层视图
  - 你想要用户强烈意识到不同的视图
  
* Spinners: spinner 是一个下拉菜单，可以让用户在不同视图之间切换，在下列情况下可以让 spinner 出现在主动作栏上:
  - 你不想因为标签栏放弃竖直方向上的屏幕空间
  - 用户会对同一数据集切换不同的显示视图（例如，日历上按天，星期，月查看事件）或者同种类型的数据（例如不同帐户的内容）

* Navigation drawers: navigation drawer 是滑出式的菜单，可以让用户在视图之间切换。它可以包含大量的项目，并且可以从应用的任何地方访问。Navigation drawer 向你展示应用的顶层视图，也可以提供向低层屏幕的导航。这使得他们特别适用于复杂的应用。在下面情况下你可以使用它：
  - 你不想因为标签栏放弃竖直方向上的屏幕空间
  - 你有大量的顶层视图
  - 你想要在较低的层次上直接访问屏幕
  - 你想要在彼此没有关系的视图之前提供快速的导航
  - 你有特别深的导航分支
  
* Don't mix and match: 如果你已经选择了最佳的顶层导航方式，就不要混合各种模式。例如，如果你决定使用标签在顶层之间切换，就不要添加 drawer，即使你的导航分支很深。这种情况下，navigation drawer 会简单地重复标签上的信息，这会让用户感到困惑。

### Categories

一般情况下，一个数据驱动的应用，其目的就在于在不同的类别到类别详情之间导航，数据可以浏览，管理。要通过保持应用层次数少，来最小化用户使用导航需要付出的努力。

虽然从顶层视图到详情视图要经过的导航数目和你内容的结构有关系，但是还是有几种方式可以减少导航带来的焦虑感。

* Use tabs to combine category selection and data display: 如果各个类别是相似的，并且类别的数目很少，可以使用标签将类别选择和数据显示结合在一起。这样可以减少层级并且数据保持在用户注意力的中心。在数据类别之间进行侧面导航更像是一种随意的浏览，而非显式的导航。如果类别是相似的，可以预测的，或者非常相关，可以使用滑动标签。保持标签数目在一个可以管理的范围内，以便减少因为导航需要付出的努力。Rule of thumb: 不要多于 5-7 个。如果标签类别不是非常相关，选择固定标签更好，类别可以同时显示。
* Allow cutting through hierarchies: 利用那些可以帮助用户更快达成目标的捷径。为了能使得用户可以在顶层为列表或者网格 视图中的数据项调用动作，使用下拉或者分割的列表项，将主要动作直接显示在列表视图中。这使得用户可以在数据上调用动作，而不用通过导航进入下一层级。
* Acting upon multiple data items: 虽然类别视图多数情况下用于将用户引导至内容详情，但是要记住总是有很好的理由将动作作用于数据集合上。例如，如果你允许用户删除详情视图中的数据项，那么，你也应该允许他们删除类别视图中的多个数据项。分析哪个详情视图的动作适用于多个项的集合，然后使用多选，允许将这些动作应用于多个数据项。

### Details
详情视图允许你浏览并作用于你的数据，详情视图的布局依赖于被显示的数据类型，因此不同应用之间有着很大的区别。

* Layout: 考虑用户会在详情页面执行的动作并据此安排布局。
* Make navigation between detail views efficient: 如果用户很可能想要按次序查看多个项，要允许他们在详情视图中在项之间导航。使用滑动视图或者其它技术，例如缩略视图控件去实现。

### Checklist

* 找到在起始屏幕上显示有用信息的方式
* 使用动作栏提供一致的导航
* 使用水平导航和捷径保证浅的导航层次
* 使用多选允许用户将动作作用于多个数据
* 使用滑动视图在详情视图中的项之间快速导航

## Navigation

一致的导航是用户整体体验的基本组成部分。很少有东西能比表现不一致并且出现未预料行为的导航更让用户感觉沮丧的了。Android 3.0 在全局导航行为方面引入了一个重要的变化。完全遵循 `返回及向上` 指南，会让你应用的导航让用户感觉可预料，并且可靠。Android 2.3及之前的系统依赖于系统的返回按钮，支持应用内的导航 。随着 Android 3.0 引入动作栏，第二个导航机制出现 了，即向上按钮，由应用图标和左箭头构成。

### Up vs. Back

向上按钮用于应用内的导航，它基于屏幕之间的层次关系。例如，如果屏幕A显示一些列表项，选择一个项进入屏幕B，那么屏幕B应该提供一个向上按钮，返回屏幕A.

如果屏幕是应用中最顶层的，那么不应该显示向上按钮。

系统返回按钮用于导航，与用户最近使用的屏幕的时间顺序相反。它基于屏幕之间的时序关系，而不是屏幕层次关系。

当之前查看的屏幕同时也是当前屏幕上一层级的屏幕时，按下返回按钮与向上按钮会产生同样的结果，这是经常出现的。然而，向上按钮会将用户保持在应用内部，而返回按钮可以返回主屏幕，甚至另一个应用。

返回按钮也支持一些并非与屏幕到屏幕导航相关的功能：

* 消除浮动窗口
* 消除与环境相关的动作栏，去掉已选择项的高亮
* 隐藏屏幕键盘

### Navigation Within Your App

* Navigating to screens with multiple entry points: 有时候，一个屏幕在应用的层次结构中，并没有一个严格的位置，可以从多个进入点进入，例如设置屏幕可以从应用中的任何其它屏幕进入。在这种情况下，向上按钮应该像返回按钮一样返回之前的屏幕。
* Changing view iwthin a screen: 改变屏幕的视图选项并没有改变向上按钮和返回按钮的行为：屏幕依然处于应用层级的同一位置，并且没有创建新的导航历史。这种视图改变的例子有：
  - 使用标签或者左右滑动切换视图
  - 使用下拉切换视图
  - 过滤列表
  - 排序列表
  - 改变显示特征（例如放大）
* Navigating between sibling screens

当你的应用支持从一系列列表项到列表项详情的导航时，通常也需要支持直接从一个列表项的详情页切换到下一个列表项的详情页，例如，在 Gmail 中，很容易通过左右滑动从同一收件箱中的一个会话切换到另一个会话。像改变屏幕视图一样，这样的导航并不会改变向上或者返回的行为。

然而，一个显著的例外出现在你浏览一系统相关视图，但是这些视图并没有被一个列表绑定在一起，例如，当你浏览应用商店中同一开发者的作品，或者同一艺术家的专辑时。在这种情况下，依次点击链接后会创建一个历史，这会导致返回按钮返回上一个浏览的屏幕。但是向上按钮还是会跳过这些相关屏幕，返回最近的容器屏幕。

你可以基于你对详情页面的了解使向上按钮更“聪明”。扩展一个之前应用商店的例子，设想一下用户从书籍列表进入书籍详情，再进入电影详情，那么从电影详情页面按向上按钮时，可以返回到之前用户没有打开的电影列表项页面。

### Navigation into Your App via Home Screen Widgets and Notifications

你可以使用主屏幕控件或者通知，帮助你的用户直接进入应用层级下层的屏幕。例如，Gmail 的收件箱控件以及新消息，都可以跳过收件箱页面，直接进入会话页面。

在这种情况下，可以像这样处理向上按钮：

* 如果目标屏幕通常都是由应用内特定的屏幕进入，那么向上按钮应该导航到这个屏幕
* 否则，向上屏幕应该导航到应用最上层的屏幕

对返回按钮来说，应该让它的行为可预测。可以向任务栈中插入从当前屏幕到最上层屏幕中间路径中所有的导航，这可以让那些忘记自己是如何进入应用的用户，在退出之前进入最上层的屏幕。

例如， Gmail 的屏幕控件中，有一个按钮可以直接进入写邮件屏幕，这个屏幕的向上或者返回按钮会让用户进入收件箱，在收件箱内返回，会进入主屏幕。

